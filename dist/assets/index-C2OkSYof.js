(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const p of c.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function l(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(n){if(n.ep)return;n.ep=!0;const c=l(n);fetch(n.href,c)}})();const a=document.getElementById("connect-screen"),b=document.getElementById("connect-form"),y=document.getElementById("server-url"),h=document.getElementById("connections-list"),m=document.getElementById("main-app"),O=document.getElementById("go"),E=document.getElementById("url"),C=document.getElementById("viewer"),I=document.getElementById("back"),x=document.getElementById("reload"),P=document.getElementById("home"),L=document.getElementById("domain");let o=JSON.parse(localStorage.getItem("exnetHistory")||"[]"),i=o.length?o.length-1:-1,u=localStorage.getItem("exnetServerUrl"),r=JSON.parse(localStorage.getItem("exnetRecentConnections")||"[]");function f(){h.innerHTML="";const e=r;if(e.length===0){const t=document.createElement("li");t.textContent="No hay conexiones recientes",t.style.color="#94a3b8",t.style.fontStyle="italic",t.style.padding="0.5rem 0",h.appendChild(t);return}e.forEach(t=>{const l=document.createElement("li"),s=document.createElement("a");s.href="#",s.textContent=t,s.addEventListener("click",n=>{n.preventDefault(),S(t)}),l.appendChild(s),h.appendChild(l)})}function M(e){r=r.filter(t=>t!==e),r.unshift(e),localStorage.setItem("exnetRecentConnections",JSON.stringify(r)),f()}function S(e){localStorage.setItem("exnetServerUrl",e),M(e),o.length===0&&(o.push(e),i=0,g()),a.classList.add("hidden"),m.classList.remove("hidden"),d(e)}function N(){a.classList.remove("hidden"),m.classList.add("hidden"),f(),u&&(y.value=u),v()}document.addEventListener("DOMContentLoaded",N);function B(){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(document.body.style.paddingTop="0",/iPad|iPhone|iPod/.test(navigator.userAgent)&&document.body.classList.add("ios-device"))}document.addEventListener("DOMContentLoaded",B);window.addEventListener("orientationchange",B);u?(a.classList.remove("hidden"),m.classList.add("hidden"),y.value=u,f(),v()):(a.classList.remove("hidden"),m.classList.add("hidden"),f());b.addEventListener("submit",e=>{e.preventDefault();let t=y.value.trim();t&&S(t)});O.addEventListener("submit",e=>{e.preventDefault();let t=E.value.trim();i===o.length-1?(o.push(t),i++):(o.splice(i+1),o.push(t),i=o.length-1),g(),d(t)});I.addEventListener("click",()=>{i>0&&(i--,g(),d(o[i]))});x.addEventListener("click",()=>{i>=0&&d(o[i])});P.addEventListener("click",()=>{const e=localStorage.getItem("exnetServerUrl")||"https://google.es";i===o.length-1?(o.push(e),i++):(o.splice(i+1),o.push(e),i=o.length-1),g(),d(e)});function d(e){C.src=e,E.value=e;try{const t=new URL(e);L.textContent=t.hostname}catch{L.textContent=e}v()}function v(){I.disabled=i<=0}function g(){localStorage.setItem("exnetHistory",JSON.stringify(o))}
